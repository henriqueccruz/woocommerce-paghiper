(function(){var z=Object.defineProperty;var D=(e,l,u)=>l in e?z(e,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[l]=u;var M=(e,l,u)=>D(e,typeof l!="symbol"?l+"":l,u);jQuery(function(e){function l(a){const{message:t,type:i="info",duration:s=3e3}=a;e("#ph-reusable-notifications").length||e("body").append('<div id="ph-reusable-notifications"></div>');const o=e("<div></div>").addClass(`ph-notification ${i}`).html(t);return e("#ph-reusable-notifications").append(o),s>0&&setTimeout(()=>{o.addClass("fade-out"),o.on("animationend",()=>{o.remove()})},s),o}if(typeof paghiper_settings>"u"||!e("#paghiper-due-date-container").length)return;const x=e("#woocommerce_paghiper_pix_due_date_mode, #woocommerce_paghiper_billet_due_date_mode"),_=e("#woocommerce_paghiper_pix_due_date_value, #woocommerce_paghiper_billet_due_date_value"),y=e("#due-date-mode-toggle"),f=e("#days-mode-section"),b=e("#minutes-mode-section");e(".mode-switcher.disabled").on("click",function(a){a.preventDefault(),l({message:"Essa opção está disponível apenas para o PIX PagHiper.",type:"info"})}),paghiper_settings.is_pix?y.on("change",function(){const a=e(this).is(":checked");f.toggleClass("active",!a),b.toggleClass("active",a),x.val(a?"minutes":"days").trigger("change"),g()}):(f.addClass("active"),b.removeClass("active"),x.val("days")),e("#mainform").on("submit",function(a){if(paghiper_settings.is_pix&&x.val()==="minutes"){const t=_.val();t<5&&(confirm(`A(s) transação(ões) gerada(s) vai(vão) expirar em apenas ${t} minutos. Continuar?`)||a.preventDefault())}});let d={},v;function g(){if(paghiper_settings.is_pix&&y.is(":checked")){const a=d.days.value,t=d.hours.value,i=d.minutes.value,s=a*24*60+t*60+i;_.val(s).trigger("change")}else _.val(v.value).trigger("change")}class I{constructor(t){this.element=e('<div class="odometer-digit"></div>'),this.currentValue=parseInt(t,10),this.rotor=e('<div class="odometer-rotor"></div>');for(let i=0;i<10;i++)this.rotor.append(e('<div class="odometer-digit-value"></div>').text(i));this.rotor.append(e('<div class="odometer-digit-value"></div>').text(0)),this.element.append(this.rotor)}initializePosition(){const t=this.element.height();t!==0&&this.rotor.css({transition:"none",transform:`translateY(-${this.currentValue*t}px)`})}setValue(t,i){if(t===this.currentValue)return;const s=this.element.height();if(s===0)return;const r=this.rotor,o=this.currentValue===9&&t===0&&i>0,n=this.currentValue===0&&t===9&&i<0;o?(r.css({transition:"transform 0.4s ease-in-out",transform:`translateY(-${10*s}px)`}),setTimeout(()=>{r.css({transition:"none",transform:"translateY(0px)"})},400)):n?(r.css({transition:"none",transform:`translateY(-${10*s}px)`}),setTimeout(()=>{r.css({transition:"transform 0.4s ease-in-out",transform:`translateY(-${9*s}px)`})},20)):r.css({transition:"transform 0.4s ease-in-out",transform:`translateY(-${t*s}px)`}),this.currentValue=t}}const w=class w{constructor(t,i,s){this.container=e(t),this.config=w.LIMITS[s],this.value=Math.max(this.config.min,Math.min(i,this.config.max)),this.digits=[],this.isEditing=!1,this.wrapper=e('<div class="odometer-display"></div>'),this.container.html(this.wrapper);const r=this.value>=100?3:2,o=this.value.toString().padStart(r,"0");for(let n=0;n<o.length;n++){const h=new I(o[n]);this.digits.push(h),this.wrapper.append(h.element),h.initializePosition()}this.digits.length===3?this.wrapper.addClass("has-three-digits"):this.wrapper.removeClass("has-three-digits"),this.wrapper.on("click",()=>{this.isEditing||this.showInput()})}showInput(){let t=this.wrapper.outerWidth(),i=this.wrapper.outerHeight();console.log(t,i),this.isEditing=!0,this.wrapper.hide();const s=e('<input type="number" class="odometer-input" />');s.css({"min-width":t+"px",width:t+"px",height:i+"px","font-size":"1.8em","text-align":"center",border:"1px solid #999","background-color":"#fff","box-sizing":"border-box",margin:0,padding:0}),s.val(this.value),this.container.append(s),s.focus().select();const r=e('<span style="display:none"></span>');r.css({"font-size":s.css("font-size"),"font-family":s.css("font-family")}),e("body").append(r),s.on("input",function(){r.text(e(this).val()),e(this).css("width",r.width()+10+"px")}).trigger("input");const o=()=>{let n=parseInt(s.val(),10);if(isNaN(n)?n=this.value:n=Math.max(this.config.min,Math.min(n,this.config.max)),s.remove(),this.wrapper.show(),this.isEditing=!1,n!==this.value){const h=n>this.value?1:-1;this.setValue(n,h),g()}};s.on("blur",o),s.on("keydown",n=>{n.key==="Enter"?o():n.key==="Escape"&&(s.remove(),this.wrapper.show(),this.isEditing=!1)})}setValue(t,i){if(t===this.value)return;const s=t>=100?3:2,r=this.value.toString(),o=t.toString(),n=this.digits.length,h=Math.max(s,o.length);if(h>n)for(let c=n;c<h;c++){const m=new I("0");this.digits.unshift(m),this.wrapper.prepend(m.element),m.initializePosition()}else if(h<n)for(let c=h;c<n;c++)this.digits[0].element.remove(),this.digits.shift();h===3?this.wrapper.addClass("has-three-digits"):this.wrapper.removeClass("has-three-digits");const V=r.padStart(this.digits.length,"0"),E=o.padStart(this.digits.length,"0");for(let c=0;c<this.digits.length;c++){const m=parseInt(V[c],10),S=parseInt(E[c],10);m!==S&&this.digits[c].setValue(S,i)}this.value=t}increment(){let t=!1,i=this.value+1;return i>this.config.max&&(i=this.config.wrap?this.config.min:this.config.max,t=!0),this.setValue(i,1),t}decrement(){let t=!1,i=this.value-1;return i<this.config.min&&(i=this.config.max,t=!0),this.setValue(i,-1),t}};M(w,"LIMITS",{"boleto-days":{min:1,max:400,wrap:!0},"pix-days":{min:0,max:400,wrap:!0},hours:{min:0,max:23,wrap:!0},minutes:{min:0,max:59,wrap:!0}});let p=w;const C=paghiper_settings.due_date_mode==="days"?parseInt(paghiper_settings.due_date_value,10):1,k=paghiper_settings.is_pix?"pix-days":"boleto-days";if(v=new p(f.find(".days-display"),C,k),f.find(".chevron-control").on("click",function(){if(e(".odometer-input").length){e(".odometer-input").trigger("blur");return}e(this).data("action")==="increment"?v.increment():v.decrement(),g()}),paghiper_settings.is_pix){let a=function(){let t={days:0,hours:0,minutes:30};if(paghiper_settings.due_date_mode==="minutes"){const i=parseInt(paghiper_settings.due_date_value,10);!isNaN(i)&&i>0&&(t={days:Math.floor(i/(24*60)),hours:Math.floor(i%(24*60)/60),minutes:i%60})}d.days=new p(e("#cron-days-pix"),t.days,"pix-days"),d.hours=new p(e("#cron-hours-pix"),t.hours,"hours"),d.minutes=new p(e("#cron-minutes-pix"),t.minutes,"minutes"),g()};var T=a;a(),e("#minutes-mode-section .chevron-control").on("click",function(){if(e(".odometer-input").length){e(".odometer-input").trigger("blur");return}const t=e(this),i=t.data("unit");t.data("action")==="increment"?d[i].increment()&&(i==="minutes"?d.hours.increment()&&d.days.increment():i==="hours"&&d.days.increment()):d[i].decrement()&&(i==="minutes"?d.hours.decrement()&&d.days.decrement():i==="hours"&&d.days.decrement()),g()}),y.trigger("change")}});
//# sourceMappingURL=admin.min.js.map
})();