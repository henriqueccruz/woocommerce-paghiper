(function(){"use strict";const{__:Fe}=window.wp.i18n,{useState:R,useEffect:ie,useCallback:le}=window.wp.element,se={style:{base:{iconColor:"#666EE8",color:"#31325F",fontSize:((e,i,l)=>{let a={};if(typeof document=="object"&&typeof document.querySelector=="function"&&typeof window.getComputedStyle=="function"){const u=document.querySelector(e);u&&(a=window.getComputedStyle(u))}return a[i]||l})(".wc-block-checkout","fontSize","16px"),lineHeight:1.375,"::placeholder":{color:"#fff"}}},classes:{focus:"focused",empty:"empty",invalid:"has-error"}},ue=e=>{const[i,l]=R(!1),[a,u]=R(!1),[c,o]=R({...se,...e}),[v,d]=R("");ie(()=>{const n=i?"#CFD7E0":"#fff";o(r=>{let s;return r.showIcon===!1?s={showIcon:!1}:typeof r.showIcon<"u"?s={showIcon:i}:s={},{...r,style:{...r.style,base:{...r.style.base,"::placeholder":{color:n}}},...s}})},[i]);const t=le((n,r)=>{l(n?s=>!s:!0),u(!!r)},[l,u]);return{options:c,isActive:i,isFocus:a,onActive:t,error:v,setError:d}};var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F={},B={},y={};Object.defineProperty(y,"__esModule",{value:!0});class b extends Error{}b.INVALID_DV=new b("Dígito verificador inválido"),b.EMPTY_VALUE=new b("Valor não preenchido"),b.MAX_LEN_EXCEDEED=new b("Número de caracteres excedido"),b.REPEATED_SEQUENCE=new b("Sequência de números repetidos não permitida"),y.default=b;var h={},ce=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(h,"__esModule",{value:!0}),h.sumToDV=oe,h.checkRepeatedSequence=T,h.sumElementsByMultipliers=de,h.fakeNumber=fe,h.clearValue=L,h.insertAtPosition=q,h.removeFromPosition=me,h.applyMask=ve,h.randomLetter=ge;const I=ce(y);function oe(e){return e%11<2?0:11-e%11}function T(e){return[...e].every(i=>i===e[0])}function de(e,i){return i.reduce((l,a,u)=>l+a*Number(e[u]),0)}function fe(e,i=!1,l=!1){let a;return l?a=Math.round(Math.random()*36**e).toString(36).toLocaleUpperCase():a=Math.floor(Math.random()*10**e).toString(),i?String(a).padStart(e,"0"):String(a)}function L(e,i=null,l){let a=String(e).replace(/([/.-]+)/gi,"");if(l){if(l.rejectEmpty===!0&&a.length===0)throw I.default.EMPTY_VALUE;if(l.rejectHigherLength===!0&&i&&a.length>i)throw I.default.MAX_LEN_EXCEDEED;if(l.rejectEqualSequence===!0&&i&&T(a))throw I.default.REPEATED_SEQUENCE;i&&l.fillZerosAtLeft&&(a=a.padStart(i,"0")),i&&l.trimAtRight&&(a=a.substring(0,i))}return a}function q(e,i,l){return`${e.substring(0,l)}${i}${e.substring(l)}`}function me(e,i,l){return[e.slice(0,i),e.slice(l)].join("")}function ve(e,i){const l=L(i).length;let a=L(e,l,{fillZerosAtLeft:!0,trimAtRight:!0});const u=["/","-",".","(",")"," "];for(let c=0;c<i.length;c+=1){const o=i[c];u.includes(o)&&(a=q(a,o,c))}return a}function ge(){const e=Math.floor(1+Math.random()*26);return String.fromCharCode(e+64)}(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fake=e.mask=e.validate=e.validateOrFail=e.dv=void 0;const l=i(y),a=h,u=t=>{const n=(0,a.clearValue)(t,9,{trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n.substring(0,9),[2,3,4,5,6,7,8,9,10]),s=(0,a.sumToDV)(r),f=(0,a.sumElementsByMultipliers)(n.substring(0,9)+s,[3,4,5,6,7,8,9,10,11,2]),g=(0,a.sumToDV)(f);return`${s}${g}`};e.dv=u;const c=t=>{const n=(0,a.clearValue)(t,11,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(9,11))throw l.default.INVALID_DV;return!0};e.validateOrFail=c;const o=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=o;const v=t=>(0,a.applyMask)(t,"000000000-00");e.mask=v;const d=(t=!1)=>{const n=(0,a.fakeNumber)(9,!0),r=`${n}${(0,e.dv)(n)}`;return t?(0,e.mask)(r):r};e.fake=d,e.default=e.validate})(B);var D={},_e=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0}),D.dv=$,D.mask=H,D.fake=pe,D.validateOrFail=J,D.validate=U;const he=_e(y),M=h;function $(e){const i=(0,M.clearValue)(e,12,{trimAtRight:!0,rejectEmpty:!0}),l=[5,4,3,2,9,8,7,6,5,4,3,2],a=Z(i.substring(0,12),l),u=[6,5,4,3,2,9,8,7,6,5,4,3,2],c=Z(i.substring(0,12)+a,u);return`${a}${c}`}function H(e){return(0,M.applyMask)(e,"00.000.000/0000-00")}function pe(e=!1){const i=typeof e=="boolean"?{withMask:e,alphanumeric:!0}:{withMask:!1,alphanumeric:!0,...e},l=(0,M.fakeNumber)(12,!0,i.alphanumeric),a=`${l}${$(l)}`;return i.withMask?H(a):a}function J(e){const i=(0,M.clearValue)(e,14,{fillZerosAtLeft:!1,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if($(i)!==i.substring(12,14))throw he.default.INVALID_DV;return!0}function U(e){try{return J(e)}catch{return!1}}D.default=U;function ye(e){return/^\d$/.test(e)?+e:e.toLocaleUpperCase().charCodeAt(0)-48}function Z(e,i){const l=[...e].map(a=>ye(a)).reduce((a,u,c)=>a+u*i[c],0);return(0,M.sumToDV)(l)}var X={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(y),a=h,u=t=>{const n=(0,a.clearValue)(t,9,{trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n,[10,9,8,7,6,5,4,3,2]),s=(0,a.sumToDV)(r),f=(0,a.sumElementsByMultipliers)(n+s,[11,10,9,8,7,6,5,4,3,2]),g=(0,a.sumToDV)(f);return`${s}${g}`};e.dv=u;const c=t=>(0,a.applyMask)(t,"000.000.000-00");e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(9,!0),r=`${n}${(0,e.dv)(n)}`;return t?(0,e.mask)(r):r};e.fake=o;const v=t=>{const n=(0,a.clearValue)(t,11,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(9,11))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(X);var W={};(function(e){var i=_&&_.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0,e._getSubCourt=t;const l=i(y),a=h,u=n=>{const r=(0,a.clearValue)(n,18,{trimAtRight:!0,rejectEmpty:!0}),s=r.substring(0,7),f=r.substring(7,14),g=r.substring(14,18);return String(98-+`${+`${Number(s)%97}${f}`%97}${g}00`%97).padStart(2,"0")};e.dv=u;const c=n=>(0,a.applyMask)(n,"0000000-00.0000.0.00.0000");e.mask=c;const o=(n=!1)=>{const r=(0,a.fakeNumber)(7,!0),s=new Date().getFullYear()-+(0,a.fakeNumber)(1);let f=(0,a.fakeNumber)(1,!0);f=f==="0"?"1":f;const g=t(),E=`${f}${g}`,w=(0,a.fakeNumber)(4,!0),p=`${r}${s}${E}${w}`,P=(0,e.dv)(p),m=(0,a.insertAtPosition)(p,P,7);return n?(0,e.mask)(m):m};e.fake=o;const v=n=>{const r=(0,a.clearValue)(n,20,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0}),s=(0,a.removeFromPosition)(r,7,9);if(s.substring(11,12)==="0")throw new Error('Código do Órgão Judiciário não pode ser "0"');if((0,e.dv)(s)!==r.substring(7,9))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=n=>{try{return(0,e.validateOrFail)(n)}catch{return!1}};e.validate=d;function t(n=void 0){return n=n??(0,a.fakeNumber)(2,!0).toString(),+n==0?"01":n}e.default=e.validate})(W);var z={};(function(e){var i=_&&_.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(y),a=h,u=n=>{const s=(0,a.clearValue)(n,15,{rejectEmpty:!0,trimAtRight:!0}).split("").reverse().join(""),f=(0,a.sumElementsByMultipliers)(s,[...Array(15)].map((p,P)=>P+2)),g=t(f),E=(0,a.sumElementsByMultipliers)(g+s,[...Array(16)].map((p,P)=>P+2)),w=t(E);return`${g}${w}`};e.dv=u;const c=n=>(0,a.applyMask)(n,"00000.000000/0000-00");e.mask=c;const o=(n=!1)=>{const r=(0,a.fakeNumber)(15,!0),s=`${r}${(0,e.dv)(String(r))}`;return n?(0,e.mask)(s):s};e.fake=o;const v=n=>{const r=(0,a.clearValue)(n,17,{rejectEmpty:!0,rejectHigherLength:!0});if((0,e.dv)(r)!==r.substring(15,17))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=n=>{try{return(0,e.validateOrFail)(n)}catch{return!1}};e.validate=d,e.default=e.validate;function t(n){const r=11-n%11,f=[{rest:11,dv:1},{rest:10,dv:0}].find(g=>g.rest===r);return f?f.dv:r}})(z);var Q={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(y),a=h,u=t=>{const n=(0,a.clearValue)(t,10,{trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n,[3,2,9,8,7,6,5,4,3,2]);return String((0,a.sumToDV)(r))};e.dv=u;const c=t=>(0,a.applyMask)(t,"000.00000.00-0");e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(10,!0),r=`${n}${(0,e.dv)(n)}`;return t?(0,e.mask)(r):r};e.fake=o;const v=t=>{const n=(0,a.clearValue)(t,11,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(10,11))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(Q);var Y={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(y),a=h,u=t=>{if(!t)throw l.default.EMPTY_VALUE;const n=String(t).replace(/[^0-9]+/gi,"").padStart(8,"0").substring(0,8),s=(0,a.sumElementsByMultipliers)(n,[8,6,4,2,3,5,9,7])%11,g=[{rest:0,dv:5},{rest:1,dv:0}].find(w=>w.rest===s),E=g?g.dv:11-s;return String(E)};e.dv=u;const c=t=>String(t).toLocaleUpperCase();e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(8,!0),r=`${(0,a.randomLetter)()}${(0,a.randomLetter)()}${n}${(0,e.dv)(n)}BR`;return t?(0,e.mask)(r):r};e.fake=o;const v=t=>{if(!/^[a-z]{2}([\d]{9})[a-z]{2}$/gi.test(String(t)))throw new Error('O número não está no formato "XX000000000XX"');const n=(0,a.clearValue)(t.substring(2,11),9);if((0,e.dv)(t.substring(2,11))!==n.substring(8,9))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(Y);var G={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(y),a=h,u=t=>{const n=(0,a.clearValue)(t,10,{fillZerosAtLeft:!0,trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n,[3,2,9,8,7,6,5,4,3,2])*10;return`${r%11>=10?0:r%11}`};e.dv=u;const c=t=>(0,a.applyMask)(t,"0000000000-0");e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(10,!0),r=`${n}${(0,e.dv)(n)}`;return t?(0,e.mask)(r):r};e.fake=o;const v=t=>{const n=(0,a.clearValue)(t,11,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(10,11))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(G);var K={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(y),a=h,u=t=>{const n=(0,a.clearValue)(t,10,{fillZerosAtLeft:!0,trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n.substring(0,8),[2,3,4,5,6,7,8,9]),s=r%11>=10?0:r%11,f=(0,a.sumElementsByMultipliers)(n.substring(8,10)+s,[7,8,9]),g=f%11>=10?0:f%11;return`${s}${g}`};e.dv=u;const c=t=>(0,a.applyMask)(t,"0000.0000.0000");e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(8,!0),r=(Math.random()*27+1).toFixed(0).padStart(2,"0"),s=`${n}${r}${(0,e.dv)(n+r)}`;return t?(0,e.mask)(s):s};e.fake=o;const v=t=>{const n=(0,a.clearValue)(t,12,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(10,12))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(K),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNUP17=e.isTituloEleitor=e.isRenavam=e.isPostalCode=e.isPIS=e.isJudicialProcess=e.isCPF=e.isCNPJ=e.isCNH=void 0;const i=B,l=D,a=X,u=W,c=z,o=Q,v=Y,d=G,t=K,n=m=>(0,i.validate)(m);e.isCNH=n;const r=m=>(0,l.validate)(m);e.isCNPJ=r;const s=m=>(0,a.validate)(m);e.isCPF=s;const f=m=>(0,u.validate)(m);e.isJudicialProcess=f;const g=m=>(0,o.validate)(m);e.isPIS=g;const E=m=>(0,v.validate)(m);e.isPostalCode=E;const w=m=>(0,d.validate)(m);e.isRenavam=w;const p=m=>(0,t.validate)(m);e.isTituloEleitor=p;const P=m=>(0,c.validate)(m);e.isNUP17=P,e.default={isCNH:e.isCNH,isCNPJ:e.isCNPJ,isCPF:e.isCPF,isJudicialProcess:e.isJudicialProcess,isPIS:e.isPIS,isPostalCode:e.isPostalCode,isRenavam:e.isRenavam,isTituloEleitor:e.isTituloEleitor,isNUP17:e.isNUP17}}(F);const{__:C}=window.wp.i18n,{useState:j,useEffect:O}=window.wp.element,Ee="wc-block-gateway-input paghiper_tax_id p-Input-input Input p-Input-input--textRight",ke=({inputErrorComponent:e,onChange:i,gatewayName:l})=>{const[a,u]=j(!0),[c,o]=j(!1),[v,d]=j(!1),[t,n]=j(C("CPF do Pagador","woo-boleto-paghiper")),[r,s]=j(""),{isActive:f,isFocus:g,onActive:E,error:w,setError:p}=ue({hideIcon:!0}),P=k=>{k.error?p(k.error.message):p(""),u(k.empty),i(k),k.target.value||u(!0)};O(()=>{r.replace(/\D/g,"").length>11?n(C("CNPJ do Pagador","woo-boleto-paghiper")):n(C("CPF do Pagador","woo-boleto-paghiper")),a?(o(!1),d(!1)):g?r.replace(/\D/g,"").length==11?F.isCPF(r)?d(!0):(p(C("O número do seu CPF não está correto.","woo-boleto-paghiper")),o(!0)):r.replace(/\D/g,"").length==14&&(F.isCNPJ(r)?d(!0):(p(C("O número do seu CNPJ não está correto.","woo-boleto-paghiper")),o(!0))):r.replace(/\D/g,"").length>11&&r.replace(/\D/g,"").length<14?(p(C("O número do seu CNPJ está incompleto.","woo-boleto-paghiper")),o(!0)):r.replace(/\D/g,"").length<11&&(p(C("O número do seu CPF está incompleto.","woo-boleto-paghiper")),o(!0))},[r,g]),O(()=>{o(!1),d(!1),p("")},[r]);const m=(k,Ve)=>k.replace(/\D/g,"").length>11?"00.000.000/0000-00":"000.000.000-009";return O(()=>{typeof jQuery(".paghiper_tax_id").mask=="function"?jQuery(".paghiper_tax_id").mask(m,{onKeyPress:function(k,Ve,Ne,Se){Ne.mask(m.apply({},arguments),Se)}}):console.log("Paghiper block failed to initialize TaxID mask")},[]),React.createElement(React.Fragment,null,React.createElement("div",{className:"wc-block-components-form"},React.createElement("div",{className:"wc-block-gateway-container wc-block-components-text-input wc-inline-tax-id-element paghiper-taxid-fieldset"+(f||!a?" is-active":"")},React.createElement("input",{type:"text",id:"wc-paghiper-inline-tax-id-element",name:"_"+l+"_cpf_cnpj",className:Ee+(a?" empty Input--empty":"")+(c?" invalid":"")+(v?" valid":""),onBlur:()=>E(a,!1),onFocus:()=>E(a,!0),onChange:P,onInput:k=>s(k.target.value),"aria-label":t,required:!0,title:!0}),React.createElement("label",{htmlFor:"wc-paghiper-inline-tax-id-element"},t),React.createElement(e,{errorMessage:w}))))},{__:x}=window.wp.i18n,{useState:ee,useEffect:be}=window.wp.element,{decodeEntities:A}=window.wp.htmlEntities,{registerPaymentMethod:te}=window.wc.wcBlocksRegistry,{ValidationInputError:we}=window.wc.blocksCheckout,{getSetting:ae}=window.wc.wcSettings,V=ae("paghiper_pix_data",{}),Pe=x("PIX Paghiper","woo-boleto-paghiper"),ne=A(V.title)||Pe,N=e=>{if(typeof wc>"u"||!wc.wcBlocksRegistry)return console.error("WooCommerce Blocks registry not found. Make sure WooCommerce Blocks is active and loaded."),null;if(typeof wc>"u"||!wc.blocksCheckout)return console.error("WooCommerce Blocks Checkout not found. Make sure WooCommerce Blocks is active and loaded."),null;const{eventRegistration:i,emitResponse:l}=e,{onPaymentSetup:a}=i,[u,c]=ee(""),[o,v]=ee("");be(()=>{const t=a(async()=>{const n=u,r=!!n.length,s="_"+e.gatewayName+"_cpf_cnpj";return r?{type:l.responseTypes.SUCCESS,meta:{paymentMethodData:{[s]:n}}}:{type:l.responseTypes.ERROR,message:"There was an error"}});return()=>{t()}},[u,l.responseTypes.ERROR,l.responseTypes.SUCCESS,a]);const d=t=>{t.error&&console.log("Paghiper: Payment Error"),c(t.target.value.replace(/\D/g,""))};return React.createElement(React.Fragment,null,A(e.gatewayDescription||""),React.createElement(ke,{gatewayName:e.gatewayName,onChange:d,inputErrorComponent:we}))},De=e=>{const{PaymentMethodLabel:i}=e.components;return React.createElement(i,{text:ne})},Ce={name:"paghiper_pix",label:React.createElement(De,null),content:React.createElement(N,{gatewayName:"paghiper_pix",gatewayDescription:V.description}),edit:React.createElement(N,{gatewayName:"paghiper_pix",gatewayDescription:V.description}),canMakePayment:()=>!0,ariaLabel:ne,paymentMethodId:"paghiper_pix",supports:{features:V.supports}},S=ae("paghiper_billet_data",{}),Me=x("Boleto Paghiper","woo-boleto-paghiper"),re=A(S.title)||Me,je=e=>{const{PaymentMethodLabel:i}=e.components;return React.createElement(i,{text:re})},Re={name:"paghiper_billet",label:React.createElement(je,null),content:React.createElement(N,{gatewayName:"paghiper_billet",gatewayDescription:S.description}),edit:React.createElement(N,{gatewayName:"paghiper_billet",gatewayDescription:S.description}),canMakePayment:()=>!0,ariaLabel:re,supports:{features:S.supports}};typeof window.wc.wcBlocksRegistry<"u"&&(te(Ce),te(Re))})();
