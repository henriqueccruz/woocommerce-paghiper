(function(){"use strict";const{__:Se}=window.wp.i18n,{useState:V,useEffect:ae,useCallback:ne}=window.wp.element,re={style:{base:{iconColor:"#666EE8",color:"#31325F",fontSize:((e,i,l)=>{let a={};if(typeof document=="object"&&typeof document.querySelector=="function"&&typeof window.getComputedStyle=="function"){const s=document.querySelector(e);s&&(a=window.getComputedStyle(s))}return a[i]||l})(".wc-block-checkout","fontSize","16px"),lineHeight:1.375,"::placeholder":{color:"#fff"}}},classes:{focus:"focused",empty:"empty",invalid:"has-error"}},ie=e=>{const[i,l]=V(!1),[a,s]=V(!1),[c,o]=V({...re,...e}),[v,d]=V("");ae(()=>{const n=i?"#CFD7E0":"#fff";o(r=>{let u;return r.showIcon===!1?u={showIcon:!1}:typeof r.showIcon<"u"?u={showIcon:i}:u={},{...r,style:{...r.style,base:{...r.style.base,"::placeholder":{color:n}}},...u}})},[i]);const t=ne((n,r)=>{l(n?u=>!u:!0),s(!!r)},[l,s]);return{options:c,isActive:i,isFocus:a,onActive:t,error:v,setError:d}};var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N={},O={},p={};Object.defineProperty(p,"__esModule",{value:!0});class w extends Error{}w.INVALID_DV=new w("Dígito verificador inválido"),w.EMPTY_VALUE=new w("Valor não preenchido"),w.MAX_LEN_EXCEDEED=new w("Número de caracteres excedido"),w.REPEATED_SEQUENCE=new w("Sequência de números repetidos não permitida"),p.default=w;var h={},le=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(h,"__esModule",{value:!0}),h.sumToDV=ue,h.checkRepeatedSequence=A,h.sumElementsByMultipliers=se,h.fakeNumber=ce,h.clearValue=F,h.insertAtPosition=B,h.removeFromPosition=oe,h.applyMask=de,h.randomLetter=fe;const R=le(p);function ue(e){return e%11<2?0:11-e%11}function A(e){return[...e].every(i=>i===e[0])}function se(e,i){return i.reduce((l,a,s)=>l+a*Number(e[s]),0)}function ce(e,i=!1,l=!1){let a;return l?a=Math.round(Math.random()*36**e).toString(36).toLocaleUpperCase():a=Math.floor(Math.random()*10**e).toString(),i?String(a).padStart(e,"0"):String(a)}function F(e,i=null,l){let a=String(e).replace(/([/.-]+)/gi,"");if(l){if(l.rejectEmpty===!0&&a.length===0)throw R.default.EMPTY_VALUE;if(l.rejectHigherLength===!0&&i&&a.length>i)throw R.default.MAX_LEN_EXCEDEED;if(l.rejectEqualSequence===!0&&i&&A(a))throw R.default.REPEATED_SEQUENCE;i&&l.fillZerosAtLeft&&(a=a.padStart(i,"0")),i&&l.trimAtRight&&(a=a.substring(0,i))}return a}function B(e,i,l){return`${e.substring(0,l)}${i}${e.substring(l)}`}function oe(e,i,l){return[e.slice(0,i),e.slice(l)].join("")}function de(e,i){const l=F(i).length;let a=F(e,l,{fillZerosAtLeft:!0,trimAtRight:!0});const s=["/","-",".","(",")"," "];for(let c=0;c<i.length;c+=1){const o=i[c];s.includes(o)&&(a=B(a,o,c))}return a}function fe(){const e=Math.floor(1+Math.random()*26);return String.fromCharCode(e+64)}(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fake=e.mask=e.validate=e.validateOrFail=e.dv=void 0;const l=i(p),a=h,s=t=>{const n=(0,a.clearValue)(t,9,{trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n.substring(0,9),[2,3,4,5,6,7,8,9,10]),u=(0,a.sumToDV)(r),f=(0,a.sumElementsByMultipliers)(n.substring(0,9)+u,[3,4,5,6,7,8,9,10,11,2]),g=(0,a.sumToDV)(f);return`${u}${g}`};e.dv=s;const c=t=>{const n=(0,a.clearValue)(t,11,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(9,11))throw l.default.INVALID_DV;return!0};e.validateOrFail=c;const o=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=o;const v=t=>(0,a.applyMask)(t,"000000000-00");e.mask=v;const d=(t=!1)=>{const n=(0,a.fakeNumber)(9,!0),r=`${n}${(0,e.dv)(n)}`;return t?(0,e.mask)(r):r};e.fake=d,e.default=e.validate})(O);var C={},me=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(C,"__esModule",{value:!0}),C.dv=I,C.mask=T,C.fake=ge,C.validateOrFail=q,C.validate=H;const ve=me(p),j=h;function I(e){const i=(0,j.clearValue)(e,12,{trimAtRight:!0,rejectEmpty:!0}),l=[5,4,3,2,9,8,7,6,5,4,3,2],a=J(i.substring(0,12),l),s=[6,5,4,3,2,9,8,7,6,5,4,3,2],c=J(i.substring(0,12)+a,s);return`${a}${c}`}function T(e){return(0,j.applyMask)(e,"00.000.000/0000-00")}function ge(e=!1){const i=typeof e=="boolean"?{withMask:e,alphanumeric:!0}:{withMask:!1,alphanumeric:!0,...e},l=(0,j.fakeNumber)(12,!0,i.alphanumeric),a=`${l}${I(l)}`;return i.withMask?T(a):a}function q(e){const i=(0,j.clearValue)(e,14,{fillZerosAtLeft:!1,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if(I(i)!==i.substring(12,14))throw ve.default.INVALID_DV;return!0}function H(e){try{return q(e)}catch{return!1}}C.default=H;function _e(e){return/^\d$/.test(e)?+e:e.toLocaleUpperCase().charCodeAt(0)-48}function J(e,i){const l=[...e].map(a=>_e(a)).reduce((a,s,c)=>a+s*i[c],0);return(0,j.sumToDV)(l)}var U={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(p),a=h,s=t=>{const n=(0,a.clearValue)(t,9,{trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n,[10,9,8,7,6,5,4,3,2]),u=(0,a.sumToDV)(r),f=(0,a.sumElementsByMultipliers)(n+u,[11,10,9,8,7,6,5,4,3,2]),g=(0,a.sumToDV)(f);return`${u}${g}`};e.dv=s;const c=t=>(0,a.applyMask)(t,"000.000.000-00");e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(9,!0),r=`${n}${(0,e.dv)(n)}`;return t?(0,e.mask)(r):r};e.fake=o;const v=t=>{const n=(0,a.clearValue)(t,11,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(9,11))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(U);var Z={};(function(e){var i=_&&_.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0,e._getSubCourt=t;const l=i(p),a=h,s=n=>{const r=(0,a.clearValue)(n,18,{trimAtRight:!0,rejectEmpty:!0}),u=r.substring(0,7),f=r.substring(7,14),g=r.substring(14,18);return String(98-+`${+`${Number(u)%97}${f}`%97}${g}00`%97).padStart(2,"0")};e.dv=s;const c=n=>(0,a.applyMask)(n,"0000000-00.0000.0.00.0000");e.mask=c;const o=(n=!1)=>{const r=(0,a.fakeNumber)(7,!0),u=new Date().getFullYear()-+(0,a.fakeNumber)(1);let f=(0,a.fakeNumber)(1,!0);f=f==="0"?"1":f;const g=t(),E=`${f}${g}`,b=(0,a.fakeNumber)(4,!0),y=`${r}${u}${E}${b}`,P=(0,e.dv)(y),m=(0,a.insertAtPosition)(y,P,7);return n?(0,e.mask)(m):m};e.fake=o;const v=n=>{const r=(0,a.clearValue)(n,20,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0}),u=(0,a.removeFromPosition)(r,7,9);if(u.substring(11,12)==="0")throw new Error('Código do Órgão Judiciário não pode ser "0"');if((0,e.dv)(u)!==r.substring(7,9))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=n=>{try{return(0,e.validateOrFail)(n)}catch{return!1}};e.validate=d;function t(n=void 0){return n=n??(0,a.fakeNumber)(2,!0).toString(),+n==0?"01":n}e.default=e.validate})(Z);var X={};(function(e){var i=_&&_.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(p),a=h,s=n=>{const u=(0,a.clearValue)(n,15,{rejectEmpty:!0,trimAtRight:!0}).split("").reverse().join(""),f=(0,a.sumElementsByMultipliers)(u,[...Array(15)].map((y,P)=>P+2)),g=t(f),E=(0,a.sumElementsByMultipliers)(g+u,[...Array(16)].map((y,P)=>P+2)),b=t(E);return`${g}${b}`};e.dv=s;const c=n=>(0,a.applyMask)(n,"00000.000000/0000-00");e.mask=c;const o=(n=!1)=>{const r=(0,a.fakeNumber)(15,!0),u=`${r}${(0,e.dv)(String(r))}`;return n?(0,e.mask)(u):u};e.fake=o;const v=n=>{const r=(0,a.clearValue)(n,17,{rejectEmpty:!0,rejectHigherLength:!0});if((0,e.dv)(r)!==r.substring(15,17))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=n=>{try{return(0,e.validateOrFail)(n)}catch{return!1}};e.validate=d,e.default=e.validate;function t(n){const r=11-n%11,f=[{rest:11,dv:1},{rest:10,dv:0}].find(g=>g.rest===r);return f?f.dv:r}})(X);var W={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(p),a=h,s=t=>{const n=(0,a.clearValue)(t,10,{trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n,[3,2,9,8,7,6,5,4,3,2]);return String((0,a.sumToDV)(r))};e.dv=s;const c=t=>(0,a.applyMask)(t,"000.00000.00-0");e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(10,!0),r=`${n}${(0,e.dv)(n)}`;return t?(0,e.mask)(r):r};e.fake=o;const v=t=>{const n=(0,a.clearValue)(t,11,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(10,11))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(W);var z={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(p),a=h,s=t=>{if(!t)throw l.default.EMPTY_VALUE;const n=String(t).replace(/[^0-9]+/gi,"").padStart(8,"0").substring(0,8),u=(0,a.sumElementsByMultipliers)(n,[8,6,4,2,3,5,9,7])%11,g=[{rest:0,dv:5},{rest:1,dv:0}].find(b=>b.rest===u),E=g?g.dv:11-u;return String(E)};e.dv=s;const c=t=>String(t).toLocaleUpperCase();e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(8,!0),r=`${(0,a.randomLetter)()}${(0,a.randomLetter)()}${n}${(0,e.dv)(n)}BR`;return t?(0,e.mask)(r):r};e.fake=o;const v=t=>{if(!/^[a-z]{2}([\d]{9})[a-z]{2}$/gi.test(String(t)))throw new Error('O número não está no formato "XX000000000XX"');const n=(0,a.clearValue)(t.substring(2,11),9);if((0,e.dv)(t.substring(2,11))!==n.substring(8,9))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(z);var Q={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(p),a=h,s=t=>{const n=(0,a.clearValue)(t,10,{fillZerosAtLeft:!0,trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n,[3,2,9,8,7,6,5,4,3,2])*10;return`${r%11>=10?0:r%11}`};e.dv=s;const c=t=>(0,a.applyMask)(t,"0000000000-0");e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(10,!0),r=`${n}${(0,e.dv)(n)}`;return t?(0,e.mask)(r):r};e.fake=o;const v=t=>{const n=(0,a.clearValue)(t,11,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(10,11))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(Q);var Y={};(function(e){var i=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.validateOrFail=e.fake=e.mask=e.dv=void 0;const l=i(p),a=h,s=t=>{const n=(0,a.clearValue)(t,10,{fillZerosAtLeft:!0,trimAtRight:!0,rejectEmpty:!0}),r=(0,a.sumElementsByMultipliers)(n.substring(0,8),[2,3,4,5,6,7,8,9]),u=r%11>=10?0:r%11,f=(0,a.sumElementsByMultipliers)(n.substring(8,10)+u,[7,8,9]),g=f%11>=10?0:f%11;return`${u}${g}`};e.dv=s;const c=t=>(0,a.applyMask)(t,"0000.0000.0000");e.mask=c;const o=(t=!1)=>{const n=(0,a.fakeNumber)(8,!0),r=(Math.random()*27+1).toFixed(0).padStart(2,"0"),u=`${n}${r}${(0,e.dv)(n+r)}`;return t?(0,e.mask)(u):u};e.fake=o;const v=t=>{const n=(0,a.clearValue)(t,12,{fillZerosAtLeft:!0,rejectEmpty:!0,rejectHigherLength:!0,rejectEqualSequence:!0});if((0,e.dv)(n)!==n.substring(10,12))throw l.default.INVALID_DV;return!0};e.validateOrFail=v;const d=t=>{try{return(0,e.validateOrFail)(t)}catch{return!1}};e.validate=d,e.default=e.validate})(Y),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNUP17=e.isTituloEleitor=e.isRenavam=e.isPostalCode=e.isPIS=e.isJudicialProcess=e.isCPF=e.isCNPJ=e.isCNH=void 0;const i=O,l=C,a=U,s=Z,c=X,o=W,v=z,d=Q,t=Y,n=m=>(0,i.validate)(m);e.isCNH=n;const r=m=>(0,l.validate)(m);e.isCNPJ=r;const u=m=>(0,a.validate)(m);e.isCPF=u;const f=m=>(0,s.validate)(m);e.isJudicialProcess=f;const g=m=>(0,o.validate)(m);e.isPIS=g;const E=m=>(0,v.validate)(m);e.isPostalCode=E;const b=m=>(0,d.validate)(m);e.isRenavam=b;const y=m=>(0,t.validate)(m);e.isTituloEleitor=y;const P=m=>(0,c.validate)(m);e.isNUP17=P,e.default={isCNH:e.isCNH,isCNPJ:e.isCNPJ,isCPF:e.isCPF,isJudicialProcess:e.isJudicialProcess,isPIS:e.isPIS,isPostalCode:e.isPostalCode,isRenavam:e.isRenavam,isTituloEleitor:e.isTituloEleitor,isNUP17:e.isNUP17}}(N);const{__:D}=window.wp.i18n,{useState:M,useEffect:$}=window.wp.element,he="wc-block-gateway-input paghiper_tax_id p-Input-input Input p-Input-input--textRight",ye=({inputErrorComponent:e,onChange:i,gatewayName:l})=>{const[a,s]=M(!0),[c,o]=M(!1),[v,d]=M(!1),[t,n]=M(D("CPF do Pagador","woo-boleto-paghiper")),[r,u]=M(""),{isActive:f,isFocus:g,onActive:E,error:b,setError:y}=ie({hideIcon:!0}),P=k=>{k.error?y(k.error.message):y(""),s(k.empty),i(k),k.target.value||s(!0)};$(()=>{r.replace(/\D/g,"").length>11?n(D("CNPJ do Pagador","woo-boleto-paghiper")):n(D("CPF do Pagador","woo-boleto-paghiper")),a?(o(!1),d(!1)):g?r.replace(/\D/g,"").length==11?N.isCPF(r)?d(!0):(y(D("O número do seu CPF não está correto.","woo-boleto-paghiper")),o(!0)):r.replace(/\D/g,"").length==14&&(N.isCNPJ(r)?d(!0):(y(D("O número do seu CNPJ não está correto.","woo-boleto-paghiper")),o(!0))):r.replace(/\D/g,"").length>11&&r.replace(/\D/g,"").length<14?(y(D("O número do seu CNPJ está incompleto.","woo-boleto-paghiper")),o(!0)):r.replace(/\D/g,"").length<11&&(y(D("O número do seu CPF está incompleto.","woo-boleto-paghiper")),o(!0))},[r,g]),$(()=>{o(!1),d(!1),y("")},[r]);const m=(k,je)=>k.replace(/\D/g,"").length>11?"00.000.000/0000-00":"000.000.000-009";return $(()=>{typeof jQuery(".paghiper_tax_id").mask=="function"?jQuery(".paghiper_tax_id").mask(m,{onKeyPress:function(k,je,Me,Ve){Me.mask(m.apply({},arguments),Ve)}}):console.log("Paghiper block failed to initialize TaxID mask")},[]),React.createElement(React.Fragment,null,React.createElement("div",{className:"wc-block-components-form"},React.createElement("div",{className:"wc-block-gateway-container wc-block-components-text-input wc-inline-tax-id-element paghiper-taxid-fieldset"+(f||!a?" is-active":"")},React.createElement("input",{type:"text",id:"wc-paghiper-inline-tax-id-element",name:"_"+l+"_cpf_cnpj",className:he+(a?" empty Input--empty":"")+(c?" invalid":"")+(v?" valid":""),onBlur:()=>E(a,!1),onFocus:()=>E(a,!0),onChange:P,onInput:k=>u(k.target.value),"aria-label":t,required:!0,title:!0}),React.createElement("label",{htmlFor:"wc-paghiper-inline-tax-id-element"},t),React.createElement(e,{errorMessage:b}))))},{__:G}=window.wp.i18n,{useState:K,useEffect:pe}=window.wp.element,{decodeEntities:L}=window.wp.htmlEntities,{registerPaymentMethod:Ee}=window.wc.wcBlocksRegistry,{ValidationInputError:ke}=window.wc.blocksCheckout,{getSetting:x}=window.wc.wcSettings,S=x("paghiper_pix_data",{}),we=G("PIX Paghiper","woo-boleto-paghiper"),ee=L(S.title)||we,te=e=>{if(typeof wc>"u"||!wc.wcBlocksRegistry)return console.error("WooCommerce Blocks registry not found. Make sure WooCommerce Blocks is active and loaded."),null;if(typeof wc>"u"||!wc.blocksCheckout)return console.error("WooCommerce Blocks Checkout not found. Make sure WooCommerce Blocks is active and loaded."),null;const{eventRegistration:i,emitResponse:l}=e,{onPaymentSetup:a}=i,[s,c]=K(""),[o,v]=K("");pe(()=>{const t=a(async()=>{const n=s,r=!!n.length,u="_"+e.gatewayName+"_cpf_cnpj";return r?{type:l.responseTypes.SUCCESS,meta:{paymentMethodData:{[u]:n}}}:{type:l.responseTypes.ERROR,message:"There was an error"}});return()=>{t()}},[s,l.responseTypes.ERROR,l.responseTypes.SUCCESS,a]);const d=t=>{t.error&&console.log("Paghiper: Payment Error"),c(t.target.value.replace(/\D/g,""))};return React.createElement(React.Fragment,null,L(e.gatewayDescription||""),React.createElement(ye,{gatewayName:e.gatewayName,onChange:d,inputErrorComponent:ke}))},be=e=>{const{PaymentMethodLabel:i}=e.components;return React.createElement(i,{text:ee})},Pe={name:"paghiper_pix",label:React.createElement(be,null),content:React.createElement(te,{gatewayName:"paghiper_pix",gatewayDescription:S.description}),edit:React.createElement(te,{gatewayName:"paghiper_pix",gatewayDescription:S.description}),canMakePayment:()=>!0,ariaLabel:ee,paymentMethodId:"paghiper_pix",supports:{features:S.supports}},Ce=x("paghiper_billet_data",{}),De=G("Boleto Paghiper","woo-boleto-paghiper");L(Ce.title),typeof window.wc.wcBlocksRegistry<"u"&&Ee(Pe)})();
