(function(){jQuery(document).ready(function(e){if(typeof e(".paghiper_tax_id").mask=="function"){let o=function(){var n=function(i){return i.replace(/\D/g,"").length>11?"00.000.000/0000-00":"000.000.000-009"};e(".paghiper_tax_id").mask(n,{clearIfNotMatch:!0,placeholder:"___.___.___-__",onKeyPress:function(i,c,a,r){a.mask(n.apply({},arguments),r)}})};var t=o;e(document.body).on("updated_checkout",function(n){o()}),o()}e(document.body).on("updated_checkout",function(o){p()}),p()});function p(){let e=document.querySelectorAll('[name="billing_cpf"], [name="billing_cnpj"]'),t=document.querySelectorAll('[name="billing_first_name"], [name="billing_company"]'),o=document.querySelectorAll(".wc-paghiper-form");[].forEach.call(o,n=>{let i=n.querySelector(".paghiper-taxid-fieldset"),c=n.querySelector(".paghiper-payername-fieldset"),a=!1,r=!1;i&&(e.length>0?i.classList.add("paghiper-hidden"):(i.classList.remove("paghiper-hidden"),a=!0)),c&&(t.length>0?c.classList.add("paghiper-hidden"):(c.classList.remove("paghiper-hidden"),r=!0)),!a&&!r?n.classList.add("paghiper-hidden"):n.classList.remove("paghiper-hidden")})}window.copyPaghiperEmv=function(){let e=document.querySelector(".paghiper-pix-code"),t=e.querySelector("textarea"),o=e.querySelector("button");t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),o.dataset.originalText=o.innerHTML,o.innerHTML="Copiado!",setTimeout(function(n){let i=n.dataset.originalText;n.innerHTML=i,document.getSelection().removeAllRanges()},2e3,o)};async function m(e){if(navigator.clipboard&&window.isSecureContext)try{return await navigator.clipboard.writeText(e),!0}catch(n){console.error("Falha ao copiar com a API moderna: ",n)}const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t),t.focus(),t.select();let o=!1;try{o=document.execCommand("copy")}catch(n){console.error("Erro ao tentar copiar com o método de fallback: ",n)}return document.body.removeChild(t),o}function u(e){const{message:t,type:o="info",duration:n=3e3}=e,i=document.getElementById("ph-reusable-notifications");if(!i)return null;const c=document.createElement("div");return c.className=`ph-notification ${o}`,c.innerHTML=t,i.appendChild(c),n>0&&setTimeout(()=>{c.classList.add("fade-out"),c.addEventListener("animationend",()=>{c.remove()})},n),c}async function h(){u({message:'<span class="ph-notification-spinner"></span> O tempo para pagamento pode ter expirado. Atualizando informações...',type:"warning",duration:5e3});try{const o=await(await fetch(window.location.href)).text(),c=new DOMParser().parseFromString(o,"text/html").querySelector(".ph-checkout-v2"),a=document.querySelector(".ph-checkout-v2");c&&a?a.innerHTML=c.innerHTML:window.location.reload()}catch(t){console.error("Falha ao atualizar o conteúdo do checkout:",t),window.location.reload()}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".ph-checkout-v2__copy-code-button"),t=document.querySelector(".ph-checkout-v2__qr-container"),o=document.querySelector(".ph-checkout-v2__copy-code-container .textarea-container"),n=async()=>{var s;const a=(s=document.querySelector(".ph-checkout-v2__copy-code-container .digitable_line_container"))==null?void 0:s.textContent.trim();if(!a)return;if(await m(a)&&(u({message:"Código PIX copiado com sucesso!",type:"success"}),e)){const d=e.dataset.originalText||e.textContent;e.dataset.originalText||(e.dataset.originalText=d),e.textContent="Copiado!",setTimeout(()=>{e.textContent=d},2e3)}},i=a=>{const r=a.currentTarget.querySelector(".digitable_line_container");if(window.getSelection&&document.createRange){const s=window.getSelection(),d=document.createRange();d.selectNodeContents(r),s.removeAllRanges(),s.addRange(d)}};e&&e.addEventListener("click",n),t&&t.addEventListener("click",n),o&&o.addEventListener("click",i);const c=()=>{let a=null;const r=ph_checkout_params==null?void 0:ph_checkout_params.order_id,s=ph_checkout_params==null?void 0:ph_checkout_params.nonce;if(!r||!s)return;const d=setInterval(()=>{(!a||!document.body.contains(a))&&(a=u({message:'<span class="ph-notification-spinner"></span> Aguardando confirmação do pagamento...',type:"info",duration:0})),jQuery.post(ph_checkout_params.ajax_url,{action:"paghiper_check_payment_status",security:s,order_id:r},function(l){l.success?l.data.status==="paid"&&(clearInterval(d),a&&a.remove(),u({message:"Pagamento confirmado com sucesso!",type:"success",duration:5e3}),setTimeout(()=>{h()},1e3)):(clearInterval(d),console.error("Erro ao verificar status do pagamento:",l.data.message))})},1e4)};document.querySelector(".ph-checkout-v2")&&typeof ph_checkout_params<"u"&&c()});
//# sourceMappingURL=frontend.min.js.map
})();