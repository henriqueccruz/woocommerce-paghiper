{"version":3,"file":"frontend.min.js","sources":["../../src/js/interface/frontend.js"],"sourcesContent":["jQuery( document ).ready(function($) {\n\n\t// Masking function for out TaxID field\n\tif(typeof $('.paghiper_tax_id').mask === \"function\") {\n\n\t\tfunction initializeMask() {\n\t\t\tvar taxIdMaskBehavior = function (val) {\n\t\t\t\treturn val.replace(/\\D/g, '').length > 11 ? '00.000.000/0000-00' : '000.000.000-009';\n\t\t\t}\n\t\n\t\t\t$('.paghiper_tax_id').mask(taxIdMaskBehavior, {\n\t\t\t\tclearIfNotMatch: true,\n\t\t\t\tplaceholder: \"___.___.___-__\",\n\t\t\t\tonKeyPress: function(val, e, field, options) {\n\t\t\t\t\tfield.mask(taxIdMaskBehavior.apply({}, arguments), options);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$( document.body ).on('updated_checkout', function (event) {\n\t\t\tinitializeMask();\n\t\t});\n\n\t\tinitializeMask();\n\t}\n\n\t// Fallback for when AJAX cart update is not available.\n\t$( document.body ).on('updated_checkout', function (event) {\n\t\tcheckForTaxIdFields()\n\t});\n\n\tcheckForTaxIdFields();\n\n});\n\nfunction checkForTaxIdFields() {\n\n\tlet otherTaxIdFields \t\t= document.querySelectorAll('[name=\"billing_cpf\"], [name=\"billing_cnpj\"]'),\n\t\totherPayerNameFields \t= document.querySelectorAll('[name=\"billing_first_name\"], [name=\"billing_company\"]');\n\n\tlet paghiperFieldsetContainers = document.querySelectorAll('.wc-paghiper-form');\n\n\t[].forEach.call(paghiperFieldsetContainers, (paghiperFieldsetContainer) => {\n\n\t\tlet ownTaxIdField \t\t= paghiperFieldsetContainer.querySelector('.paghiper-taxid-fieldset'),\n\t\t\townPayerNameField \t= paghiperFieldsetContainer.querySelector('.paghiper-payername-fieldset');\n\n\t\tlet hasTaxField = false,\n\t\t\thasPayerNameField = false;\n\n\t\t\tif(ownTaxIdField) {\n\t\t\t\tif(otherTaxIdFields.length > 0) {\n\t\t\t\t\townTaxIdField.classList.add('paghiper-hidden');\n\t\t\t\t} else {\n\t\t\t\t\townTaxIdField.classList.remove('paghiper-hidden');\t\n\t\t\t\t\thasTaxField = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(ownPayerNameField) {\n\t\t\t\tif(otherPayerNameFields.length > 0) {\n\t\t\t\t\townPayerNameField.classList.add('paghiper-hidden');\n\t\t\t\t} else {\n\t\t\t\t\townPayerNameField.classList.remove('paghiper-hidden');\n\t\t\t\t\thasPayerNameField = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!hasTaxField && !hasPayerNameField) {\n\t\t\t\tpaghiperFieldsetContainer.classList.add('paghiper-hidden');\n\t\t\t} else {\n\t\t\t\tpaghiperFieldsetContainer.classList.remove('paghiper-hidden');\n\t\t\t}\n\t});\n\n}\n\n/**\n * [LEGACY] Copia o código EMV para a área de transferência.\n */\nwindow.copyPaghiperEmv = function() {\n\tlet paghiperEmvBlock \t= document.querySelector('.paghiper-pix-code');\n\tlet targetPixCode \t\t= paghiperEmvBlock.querySelector('textarea');\n\tlet targetButton \t\t= paghiperEmvBlock.querySelector('button');\n\n\ttargetPixCode.select();\n\ttargetPixCode.setSelectionRange(0, 99999); // For mobile devices\n  \n\tnavigator.clipboard.writeText(targetPixCode.value);\n\n\ttargetButton.dataset.originalText = targetButton.innerHTML;\n\ttargetButton.innerHTML = 'Copiado!';\n\n\tsetTimeout(function(targetButton) {\n\t\tlet originalText = targetButton.dataset.originalText;\n\t\ttargetButton.innerHTML = originalText;\n\t\tdocument.getSelection().removeAllRanges();\n\t}, 2000, targetButton,);\n};\n\n/**\n * Copia um texto para a área de transferência de forma robusta.\n * @param {string} text O texto a ser copiado.\n * @returns {Promise<boolean>} Retorna true se bem-sucedido, e false caso contrário.\n */\nasync function copyTextToClipboard(text) {\n  if (navigator.clipboard && window.isSecureContext) {\n    try {\n      await navigator.clipboard.writeText(text);\n      return true;\n    } catch (err) {\n      console.error('Falha ao copiar com a API moderna: ', err);\n    }\n  }\n\n  const textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n  textArea.style.position = \"fixed\";\n  textArea.style.top = \"-9999px\";\n  textArea.style.left = \"-9999px\";\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  let success = false;\n  try {\n    success = document.execCommand('copy');\n  } catch (err) {\n    console.error('Erro ao tentar copiar com o método de fallback: ', err);\n  }\n\n  document.body.removeChild(textArea);\n  return success;\n}\n\n/**\n * Exibe uma notificação flutuante.\n * @param {object} options Opções para a notificação.\n * @param {string} options.message A mensagem em texto ou HTML.\n * @param {string} [options.type='info'] O tipo de notificação (success, error, info, warning).\n * @param {number} [options.duration=3000] Duração em ms. Se 0, a notificação é fixa.\n * @param {function} [options.onDismiss] Callback disparado quando a notificação é removida.\n * @returns {HTMLElement|null} O elemento da notificação criado ou null.\n */\nfunction showPhNotification(options) {\n  const { message, type = 'info', duration = 3000, onDismiss } = options;\n  const container = document.getElementById('ph-reusable-notifications');\n  if (!container) return null;\n\n  const notification = document.createElement('div');\n  notification.className = `ph-notification ${type}`;\n  notification.innerHTML = message; // Permite HTML para ícones\n\n  container.appendChild(notification);\n\n  if (duration > 0) {\n    setTimeout(() => {\n      if (document.body.contains(notification)) {\n          notification.classList.add('fade-out');\n          notification.addEventListener('animationend', () => {\n            notification.remove();\n            if (typeof onDismiss === 'function') {\n                onDismiss();\n            }\n          });\n      }\n    }, duration);\n  }\n\n  return notification;\n}\n\n/**\n * Atualiza a área de checkout via AJAX para refletir o status mais recente do pedido.\n */\nasync function refreshCheckoutContent() {\n    const loadingSpinner = '<span class=\"ph-notification-spinner\"></span>';\n    showPhNotification({\n        message: `${loadingSpinner} Por favor aguarde...`,\n        type: 'warning',\n        duration: 5000 // Mostra por 5s enquanto carrega\n    });\n\n    try {\n        const response = await fetch(window.location.href);\n        const html = await response.text();\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(html, 'text/html');\n        \n        const newContent = doc.querySelector('.ph-checkout-v2');\n        const currentContent = document.querySelector('.ph-checkout-v2');\n\n        if (newContent && currentContent) {\n            currentContent.innerHTML = newContent.innerHTML;\n            // Aqui, podemos reinicializar event listeners se necessário no futuro\n            const event = new Event('DOMContentLoaded', {\n                bubbles: true, // The event will bubble up through the DOM\n                cancelable: false // The event cannot be cancelled\n            });\n            document.dispatchEvent(event);\n        } else {\n            window.location.reload(); // Recarrega a página se a análise falhar\n        }\n    } catch (error) {\n        console.error('Falha ao atualizar o conteúdo do checkout:', error);\n        window.location.reload(); // Recarrega em caso de erro\n    }\n}\n\n// Event Listeners para Checkout v2\ndocument.addEventListener('DOMContentLoaded', () => {\n  const copyButton = document.querySelector('.ph-checkout-v2__copy-code-button');\n  const qrContainer = document.querySelector('.ph-checkout-v2__qr-container');\n  const textContainer = document.querySelector('.ph-checkout-v2__copy-code-container .textarea-container');\n  const iPaidButton = document.getElementById('ph-i-paid-button');\n  \n  const handleCopyClick = async () => {\n    const textToCopy = document.querySelector('.ph-checkout-v2__copy-code-container .digitable_line_container')?.textContent.trim();\n    if (!textToCopy) return;\n\n    const success = await copyTextToClipboard(textToCopy);\n    if (success) {\n        if (ph_checkout_params?.is_pix) {\n            showPhNotification({ message: 'Código PIX copiado com sucesso!', type: 'success' });\n        } else {\n            showPhNotification({ message: 'Código de barras copiado com sucesso!', type: 'success' });\n        }\n      if(copyButton) {\n        const originalText = copyButton.dataset.originalText || copyButton.textContent;\n        if (!copyButton.dataset.originalText) {\n            copyButton.dataset.originalText = originalText;\n        }\n        copyButton.textContent = 'Copiado!';\n        setTimeout(() => {\n          copyButton.textContent = originalText;\n        }, 2000);\n      }\n    }\n  };\n\n  const handleSelectClick = (e) => {\n    const textDiv = e.currentTarget.querySelector('.digitable_line_container');\n    if (window.getSelection && document.createRange) {\n        const selection = window.getSelection();\n        const range = document.createRange();\n        range.selectNodeContents(textDiv);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n  };\n\n  if (copyButton) {\n    copyButton.addEventListener('click', handleCopyClick);\n  }\n  if (qrContainer) {\n    qrContainer.addEventListener('click', handleCopyClick);\n  }\n  if (textContainer) {\n    textContainer.addEventListener('click', handleSelectClick);\n  }\n\n  // Inicia a verificação de status de pagamento\n  const startPaymentStatusCheck = () => {\n    let notificationElement = null;\n    const orderId = ph_checkout_params?.order_id;\n    const nonce = ph_checkout_params?.nonce;\n\n    if (!orderId || !nonce) return;\n\n    const paymentCheckInterval = setInterval(() => {\n        \n        // Se estiver checando manualmente, CANCELA o intervalo automático definitivamente\n        // para evitar loops duplos de XHR e conflitos de UI.\n        if (isCheckingManually) {\n            iPaidButton.disabled = true;\n            clearInterval(paymentCheckInterval);\n            if (notificationElement && document.body.contains(notificationElement)) {\n                notificationElement.remove();\n                notificationElement = null;\n            }\n            return;\n        }\n\n        if (!notificationElement || !document.body.contains(notificationElement)) {\n\n            const loadingSpinner = '<span class=\"ph-notification-spinner\"></span>';\n\n            if (ph_checkout_params?.is_pix) {\n                notificationElement = showPhNotification({\n                    message: `${loadingSpinner} Aguardando confirmação do pagamento...`,\n                    type: 'info',\n                    duration: 0, // Notificação Fixa\n                });\n            } else {\n                const textMessages = [\n                    'Agora é só pagar seu boleto e aguardar a confirmação!',\n                    'Seu pagamento pode levar até 3 dias úteis para ser confirmado.',\n                    'Assim que isso ocorrer, te avisaremos por aqui.',\n                ];\n\n                notificationElement = showPhNotification({\n                    message: `${loadingSpinner} <span>${textMessages[0]}</span>`,\n                    type: 'info',\n                    duration: 0 // Fixa\n                });\n\n                const textElement = notificationElement.querySelector('span:last-child');\n                animateNotificationText(notificationElement, textElement, textMessages, 6000, 250, 1000);\n            }\n        }\n\n        // Desativa botão durante o XHR para evitar cliques concorrentes\n        if(iPaidButton) iPaidButton.disabled = true;\n\n        jQuery.post(ph_checkout_params.ajax_url, {\n            action: 'paghiper_check_payment_status',\n            security: nonce,\n            order_id: orderId\n        }, function(response) {\n            \n            // Reativa botão após resposta\n            if(iPaidButton && !isCheckingManually) iPaidButton.disabled = false;\n\n            if (response.success) {\n                if (response.data.status === 'paid') {\n                    clearInterval(paymentCheckInterval);\n                    if (notificationElement) {\n                        notificationElement.remove();\n                    }\n\n                    showPhNotification({ \n                        message: 'Pagamento confirmado com sucesso!', \n                        type: 'success', \n                        duration: 5000 \n                    });\n                    \n                    setTimeout(() => {\n                        refreshCheckoutContent();\n                    }, 1000);\n                } else if (response.data.status === 'reserved') {\n                    clearInterval(paymentCheckInterval);\n                    if (notificationElement) {\n                        notificationElement.remove();\n                    }\n\n                    showPhNotification({ \n                        message: 'Pagamento pré-confirmado! Agora é só esperar a compensação.', \n                        type: 'success', \n                        duration: 5000 \n                    });\n                    \n                    setTimeout(() => {\n                        refreshCheckoutContent();\n                    }, 1000);\n                }\n            } else {\n                // Em caso de erro, apenas logamos e permitimos que o próximo ciclo tente novamente\n                console.error('Erro ao verificar status do pagamento:', response.data.message);\n            }\n        }).fail(function() {\n             // Garante que o botão volte a ficar ativo em caso de falha de rede\n             if(iPaidButton && !isCheckingManually) iPaidButton.disabled = false;\n        });\n\n    }, 10000);\n  };\n\n  // Inicia o polling apenas na página de checkout v2 com status pendente\n  if (document.querySelector('.ph-checkout-v2[data-status=\"pending\"]') && typeof ph_checkout_params !== 'undefined') {\n      startPaymentStatusCheck();\n  }\n\n  if (iPaidButton) {\n      iPaidButton.addEventListener('click', () => {\n        manualPaymentCheck();\n      });\n  }\n\n  const restoreCartButton = document.getElementById('ph-restore-cart-button');\n  if (restoreCartButton) {\n    restoreCartButton.addEventListener('click', () => {\n        const orderId = ph_checkout_params?.order_id;\n        const nonce = ph_checkout_params?.nonce;\n        if (!orderId || !nonce) return;\n\n        const loadingSpinner = '<span class=\"ph-notification-spinner\" style=\"border-top-color: #fff;\"></span>';\n        \n        const notification = showPhNotification({\n            message: `${loadingSpinner} Restaurando seu carrinho...`,\n            type: 'info',\n            duration: 0 // Fixa\n        });\n\n        jQuery.post(ph_checkout_params.ajax_url, {\n            action: 'paghiper_restore_cart',\n            security: nonce,\n            order_id: orderId\n        }, function(response) {\n            if (response.success) {\n                if (notification) {\n                    notification.innerHTML = `${loadingSpinner} Redirecionando você para a tela de checkout...`;\n                }\n                \n                setTimeout(() => {\n                    window.location.href = response.data.redirect_url;\n                }, 2000);\n\n            } else {\n                if (notification) notification.remove();\n                showPhNotification({\n                    message: 'Ocorreu um erro ao tentar restaurar seu carrinho. Por favor, tente novamente.',\n                    type: 'error'\n                });\n            }\n        });\n    });\n  }\n});\n\nlet isCheckingManually = false;\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function animateNotificationText(notificationElement, textElement, messages, displayDuration, deleteDuration, typeDuration) {\n    let currentIndex = 0;\n    const loadingSpinner = '<span class=\"ph-notification-spinner\"></span>';\n\n    const cycle = async () => {\n        if (!document.body.contains(notificationElement)) return;\n\n        await sleep(displayDuration);\n        if (!document.body.contains(notificationElement)) return;\n\n        const currentText = messages[currentIndex];\n        for (let i = currentText.length; i >= 0; i--) {\n            if (!document.body.contains(notificationElement)) return;\n            textElement.textContent = currentText.substring(0, i);\n            await sleep(deleteDuration / currentText.length);\n        }\n\n        currentIndex = (currentIndex + 1) % messages.length;\n        const nextText = messages[currentIndex];\n\n        for (let i = 0; i < nextText.length; i++) {\n            if (!document.body.contains(notificationElement)) return;\n            textElement.textContent += nextText[i];\n            await sleep(typeDuration / nextText.length);\n        }\n\n        cycle();\n    };\n\n    cycle();\n}\n\nconst manualPaymentCheck = () => {\n    if (isCheckingManually) return;\n    isCheckingManually = true;\n\n    let notificationElement = document.querySelector('.ph-notification.info');\n\n    if (notificationElement) {\n        notificationElement.classList.add('fade-out');\n    }\n\n    const iPaidButton = document.getElementById('ph-i-paid-button');\n    if (iPaidButton) iPaidButton.disabled = true;\n\n    const orderId = ph_checkout_params?.order_id;\n    const nonce = ph_checkout_params?.nonce;\n    if (!orderId || !nonce) {\n        isCheckingManually = false;\n        if (iPaidButton) iPaidButton.disabled = false;\n        return;\n    }\n\n    const loadingSpinner = '<span class=\"ph-notification-spinner\"></span>';\n    const textMessages = [\n        'Estamos confirmando seu pagamento, só um instante...',\n        'Às vezes o banco leva um tempinho para nos notificar.',\n        'Não se preocupe, vamos continuar verificando por aqui.'\n    ];\n\n    const notification = showPhNotification({\n        message: `${loadingSpinner} <span>${textMessages[0]}</span>`,\n        type: 'warning',\n        duration: 0 // Fixa\n    });\n\n    const textElement = notification.querySelector('span:last-child');\n    animateNotificationText(notification, textElement, textMessages, 6000, 250, 1000);\n\n    const checkRunner = () => {\n        jQuery.post(ph_checkout_params.ajax_url, {\n            action: 'paghiper_check_payment_status',\n            security: nonce,\n            order_id: orderId\n        }, function(response) {\n            if (response.success && response.data.status === 'paid') {\n                clearInterval(manualCheckInterval);\n                clearTimeout(manualCheckTimeout);\n                notification.remove(); // Isso irá parar o loop de animação\n                showPhNotification({ message: 'Pagamento confirmado!', type: 'success' });\n                setTimeout(() => {\n                    if (typeof refreshCheckoutContent === 'function') {\n                        refreshCheckoutContent();\n\n                    } else {\n                        window.location.reload();\n                    }\n                }, 1000);\n            }\n        });\n    };\n\n    const manualCheckInterval = setInterval(checkRunner, 15000);\n\n    const manualCheckTimeout = setTimeout(() => {\n        clearInterval(manualCheckInterval);\n        notification.remove(); // Isso irá parar o loop de animação\n        showPhNotification({ message: 'Ainda não recebemos a confirmação do seu pagamento.', type: 'error' });\n        isCheckingManually = false;\n        if (iPaidButton) iPaidButton.disabled = false;\n    }, 1800000); // 30 minutos\n\n    checkRunner();\n};"],"names":["$","initializeMask","taxIdMaskBehavior","val","e","field","options","event","checkForTaxIdFields","otherTaxIdFields","otherPayerNameFields","paghiperFieldsetContainers","paghiperFieldsetContainer","ownTaxIdField","ownPayerNameField","hasTaxField","hasPayerNameField","paghiperEmvBlock","targetPixCode","targetButton","originalText","copyTextToClipboard","text","err","textArea","success","showPhNotification","message","type","duration","onDismiss","container","notification","refreshCheckoutContent","html","newContent","currentContent","error","copyButton","qrContainer","textContainer","iPaidButton","handleCopyClick","_a","textToCopy","handleSelectClick","textDiv","selection","range","startPaymentStatusCheck","notificationElement","orderId","nonce","paymentCheckInterval","isCheckingManually","loadingSpinner","textMessages","textElement","animateNotificationText","response","manualPaymentCheck","restoreCartButton","sleep","ms","resolve","messages","displayDuration","deleteDuration","typeDuration","currentIndex","cycle","currentText","i","nextText","checkRunner","manualCheckInterval","manualCheckTimeout"],"mappings":"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"}