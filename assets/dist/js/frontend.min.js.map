{"version":3,"file":"frontend.min.js","sources":["../../src/js/interface/frontend.js"],"sourcesContent":["jQuery( document ).ready(function($) {\n\n\t// Masking function for out TaxID field\n\tif(typeof $('.paghiper_tax_id').mask === \"function\") {\n\n\t\tfunction initializeMask() {\n\t\t\tvar taxIdMaskBehavior = function (val) {\n\t\t\t\treturn val.replace(/\\D/g, '').length > 11 ? '00.000.000/0000-00' : '000.000.000-009';\n\t\t\t}\n\t\n\t\t\t$('.paghiper_tax_id').mask(taxIdMaskBehavior, {\n\t\t\t\tclearIfNotMatch: true,\n\t\t\t\tplaceholder: \"___.___.___-__\",\n\t\t\t\tonKeyPress: function(val, e, field, options) {\n\t\t\t\t\tfield.mask(taxIdMaskBehavior.apply({}, arguments), options);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$( document.body ).on('updated_checkout', function (event) {\n\t\t\tinitializeMask();\n\t\t});\n\n\t\tinitializeMask();\n\t}\n\n\t// Fallback for when AJAX cart update is not available.\n\t$( document.body ).on('updated_checkout', function (event) {\n\t\tcheckForTaxIdFields()\n\t});\n\n\tcheckForTaxIdFields();\n\n});\n\nfunction checkForTaxIdFields() {\n\n\tlet otherTaxIdFields \t\t= document.querySelectorAll('[name=\"billing_cpf\"], [name=\"billing_cnpj\"]'),\n\t\totherPayerNameFields \t= document.querySelectorAll('[name=\"billing_first_name\"], [name=\"billing_company\"]');\n\n\tlet paghiperFieldsetContainers = document.querySelectorAll('.wc-paghiper-form');\n\n\t[].forEach.call(paghiperFieldsetContainers, (paghiperFieldsetContainer) => {\n\n\t\tlet ownTaxIdField \t\t= paghiperFieldsetContainer.querySelector('.paghiper-taxid-fieldset'),\n\t\t\townPayerNameField \t= paghiperFieldsetContainer.querySelector('.paghiper-payername-fieldset');\n\n\t\tlet hasTaxField = false,\n\t\t\thasPayerNameField = false;\n\n\t\t\tif(ownTaxIdField) {\n\t\t\t\tif(otherTaxIdFields.length > 0) {\n\t\t\t\t\townTaxIdField.classList.add('paghiper-hidden');\n\t\t\t\t} else {\n\t\t\t\t\townTaxIdField.classList.remove('paghiper-hidden');\t\n\t\t\t\t\thasTaxField = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(ownPayerNameField) {\n\t\t\t\tif(otherPayerNameFields.length > 0) {\n\t\t\t\t\townPayerNameField.classList.add('paghiper-hidden');\n\t\t\t\t} else {\n\t\t\t\t\townPayerNameField.classList.remove('paghiper-hidden');\n\t\t\t\t\thasPayerNameField = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!hasTaxField && !hasPayerNameField) {\n\t\t\t\tpaghiperFieldsetContainer.classList.add('paghiper-hidden');\n\t\t\t} else {\n\t\t\t\tpaghiperFieldsetContainer.classList.remove('paghiper-hidden');\n\t\t\t}\n\t});\n\n}\n\n/**\n * [LEGACY] Copia o código EMV para a área de transferência.\n */\nwindow.copyPaghiperEmv = function() {\n\tlet paghiperEmvBlock \t= document.querySelector('.paghiper-pix-code');\n\tlet targetPixCode \t\t= paghiperEmvBlock.querySelector('textarea');\n\tlet targetButton \t\t= paghiperEmvBlock.querySelector('button');\n\n\ttargetPixCode.select();\n\ttargetPixCode.setSelectionRange(0, 99999); // For mobile devices\n  \n\tnavigator.clipboard.writeText(targetPixCode.value);\n\n\ttargetButton.dataset.originalText = targetButton.innerHTML;\n\ttargetButton.innerHTML = 'Copiado!';\n\n\tsetTimeout(function(targetButton) {\n\t\tlet originalText = targetButton.dataset.originalText;\n\t\ttargetButton.innerHTML = originalText;\n\t\tdocument.getSelection().removeAllRanges();\n\t}, 2000, targetButton,);\n};\n\n/**\n * Copia um texto para a área de transferência de forma robusta.\n * @param {string} text O texto a ser copiado.\n * @returns {Promise<boolean>} Retorna true se bem-sucedido, e false caso contrário.\n */\nasync function copyTextToClipboard(text) {\n  if (navigator.clipboard && window.isSecureContext) {\n    try {\n      await navigator.clipboard.writeText(text);\n      return true;\n    } catch (err) {\n      console.error('Falha ao copiar com a API moderna: ', err);\n    }\n  }\n\n  const textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n  textArea.style.position = \"fixed\";\n  textArea.style.top = \"-9999px\";\n  textArea.style.left = \"-9999px\";\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  let success = false;\n  try {\n    success = document.execCommand('copy');\n  } catch (err) {\n    console.error('Erro ao tentar copiar com o método de fallback: ', err);\n  }\n\n  document.body.removeChild(textArea);\n  return success;\n}\n\n/**\n * Exibe uma notificação flutuante.\n * @param {object} options Opções para a notificação.\n * @param {string} options.message A mensagem em texto ou HTML.\n * @param {string} [options.type='info'] O tipo de notificação (success, error, info, warning).\n * @param {number} [options.duration=3000] Duração em ms. Se 0, a notificação é fixa.\n * @returns {HTMLElement|null} O elemento da notificação criado ou null.\n */\nfunction showPhNotification(options) {\n  const { message, type = 'info', duration = 3000 } = options;\n  const container = document.getElementById('ph-reusable-notifications');\n  if (!container) return null;\n\n  const notification = document.createElement('div');\n  notification.className = `ph-notification ${type}`;\n  notification.innerHTML = message; // Permite HTML para ícones\n\n  container.appendChild(notification);\n\n  if (duration > 0) {\n    setTimeout(() => {\n      notification.classList.add('fade-out');\n      notification.addEventListener('animationend', () => {\n        notification.remove();\n      });\n    }, duration);\n  }\n\n  return notification;\n}\n\n/**\n * Atualiza a área de checkout via AJAX para refletir o status mais recente do pedido.\n */\nasync function refreshCheckoutContent() {\n    const loadingSpinner = '<span class=\"ph-notification-spinner\"></span>';\n    showPhNotification({\n        message: `${loadingSpinner} Por favor aguarde...`,\n        type: 'warning',\n        duration: 5000 // Mostra por 5s enquanto carrega\n    });\n\n    try {\n        const response = await fetch(window.location.href);\n        const html = await response.text();\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(html, 'text/html');\n        \n        const newContent = doc.querySelector('.ph-checkout-v2');\n        const currentContent = document.querySelector('.ph-checkout-v2');\n\n        if (newContent && currentContent) {\n            currentContent.innerHTML = newContent.innerHTML;\n            // Aqui, podemos reinicializar event listeners se necessário no futuro\n        } else {\n            window.location.reload(); // Recarrega a página se a análise falhar\n        }\n    } catch (error) {\n        console.error('Falha ao atualizar o conteúdo do checkout:', error);\n        window.location.reload(); // Recarrega em caso de erro\n    }\n}\n\n// Event Listeners para Checkout v2\ndocument.addEventListener('DOMContentLoaded', () => {\n  const copyButton = document.querySelector('.ph-checkout-v2__copy-code-button');\n  const qrContainer = document.querySelector('.ph-checkout-v2__qr-container');\n  const textContainer = document.querySelector('.ph-checkout-v2__copy-code-container .textarea-container');\n  \n  const handleCopyClick = async () => {\n    const textToCopy = document.querySelector('.ph-checkout-v2__copy-code-container .digitable_line_container')?.textContent.trim();\n    if (!textToCopy) return;\n\n    const success = await copyTextToClipboard(textToCopy);\n    if (success) {\n        if (ph_checkout_params?.is_pix) {\n            showPhNotification({ message: 'Código PIX copiado com sucesso!', type: 'success' });\n        } else {\n            showPhNotification({ message: 'Código de barras copiado com sucesso!', type: 'success' });\n        }\n      if(copyButton) {\n        const originalText = copyButton.dataset.originalText || copyButton.textContent;\n        if (!copyButton.dataset.originalText) {\n            copyButton.dataset.originalText = originalText;\n        }\n        copyButton.textContent = 'Copiado!';\n        setTimeout(() => {\n          copyButton.textContent = originalText;\n        }, 2000);\n      }\n    }\n  };\n\n  const handleSelectClick = (e) => {\n    const textDiv = e.currentTarget.querySelector('.digitable_line_container');\n    if (window.getSelection && document.createRange) {\n        const selection = window.getSelection();\n        const range = document.createRange();\n        range.selectNodeContents(textDiv);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n  };\n\n  if (copyButton) {\n    copyButton.addEventListener('click', handleCopyClick);\n  }\n  if (qrContainer) {\n    qrContainer.addEventListener('click', handleCopyClick);\n  }\n  if (textContainer) {\n    textContainer.addEventListener('click', handleSelectClick);\n  }\n\n  // Inicia a verificação de status de pagamento\n  const startPaymentStatusCheck = () => {\n    let notificationElement = null;\n    const orderId = ph_checkout_params?.order_id;\n    const nonce = ph_checkout_params?.nonce;\n\n    if (!orderId || !nonce) return;\n\n    const paymentCheckInterval = setInterval(() => {\n        \n        if (!notificationElement || !document.body.contains(notificationElement)) {\n\n            const loadingSpinner = '<span class=\"ph-notification-spinner\"></span>';\n\n            if (ph_checkout_params?.is_pix) {\n                notificationElement = showPhNotification({\n                    message: `${loadingSpinner} Aguardando confirmação do pagamento...`,\n                    type: 'info',\n                    duration: 0 // Notificação Fixa\n                });\n            } else {\n                const textMessages = [\n                    'Agora é só pagar seu boleto e aguardar a confirmação!',\n                    'Seu pagamento pode levar até 3 dias úteis para ser confirmado.',\n                    'Assim que isso ocorrer, te avisaremos por aqui.',\n                ];\n\n                notificationElement = showPhNotification({\n                    message: `${loadingSpinner} <span>${textMessages[0]}</span>`,\n                    type: 'info',\n                    duration: 0 // Fixa\n                });\n\n                const textElement = notificationElement.querySelector('span:last-child');\n                animateNotificationText(notificationElement, textElement, textMessages, 6000, 250, 1000);\n            }\n        }\n\n        jQuery.post(ph_checkout_params.ajax_url, {\n            action: 'paghiper_check_payment_status',\n            security: nonce,\n            order_id: orderId\n        }, function(response) {\n            if (response.success) {\n                if (response.data.status === 'paid') {\n                    clearInterval(paymentCheckInterval);\n                    if (notificationElement) {\n                        notificationElement.remove();\n                    }\n\n                    showPhNotification({ \n                        message: 'Pagamento confirmado com sucesso!', \n                        type: 'success', \n                        duration: 5000 \n                    });\n                    \n                    setTimeout(() => {\n                        refreshCheckoutContent();\n                    }, 1000);\n                } else if (response.data.status === 'reserved') {\n                    clearInterval(paymentCheckInterval);\n                    if (notificationElement) {\n                        notificationElement.remove();\n                    }\n\n                    showPhNotification({ \n                        message: 'Pagamento pré-confirmado! Agora é só esperar a compensação.', \n                        type: 'success', \n                        duration: 5000 \n                    });\n                    \n                    setTimeout(() => {\n                        refreshCheckoutContent();\n                    }, 1000);\n                }\n            } else {\n                clearInterval(paymentCheckInterval);\n                console.error('Erro ao verificar status do pagamento:', response.data.message);\n            }\n        });\n\n    }, 10000);\n  };\n\n  // Inicia o polling apenas na página de checkout v2 com status pendente\n  if (document.querySelector('.ph-checkout-v2[data-status=\"pending\"]') && typeof ph_checkout_params !== 'undefined') {\n      startPaymentStatusCheck();\n  }\n\n  const iPaidButton = document.getElementById('ph-i-paid-button');\n  if (iPaidButton) {\n      iPaidButton.addEventListener('click', () => {\n          manualPaymentCheck();\n      });\n  }\n\n  const restoreCartButton = document.getElementById('ph-restore-cart-button');\n  if (restoreCartButton) {\n    restoreCartButton.addEventListener('click', () => {\n        const orderId = ph_checkout_params?.order_id;\n        const nonce = ph_checkout_params?.nonce;\n        if (!orderId || !nonce) return;\n\n        const loadingSpinner = '<span class=\"ph-notification-spinner\" style=\"border-top-color: #fff;\"></span>';\n        \n        const notification = showPhNotification({\n            message: `${loadingSpinner} Restaurando seu carrinho...`,\n            type: 'info',\n            duration: 0 // Fixa\n        });\n\n        jQuery.post(ph_checkout_params.ajax_url, {\n            action: 'paghiper_restore_cart',\n            security: nonce,\n            order_id: orderId\n        }, function(response) {\n            if (response.success) {\n                if (notification) {\n                    notification.innerHTML = `${loadingSpinner} Redirecionando você para a tela de checkout...`;\n                }\n                \n                setTimeout(() => {\n                    window.location.href = response.data.redirect_url;\n                }, 2000);\n\n            } else {\n                if (notification) notification.remove();\n                showPhNotification({\n                    message: 'Ocorreu um erro ao tentar restaurar seu carrinho. Por favor, tente novamente.',\n                    type: 'error'\n                });\n            }\n        });\n    });\n  }\n});\n\nlet isCheckingManually = false;\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function animateNotificationText(notificationElement, textElement, messages, displayDuration, deleteDuration, typeDuration) {\n    let currentIndex = 0;\n    const loadingSpinner = '<span class=\"ph-notification-spinner\"></span>';\n\n    const cycle = async () => {\n        if (!document.body.contains(notificationElement)) return;\n\n        await sleep(displayDuration);\n        if (!document.body.contains(notificationElement)) return;\n\n        const currentText = messages[currentIndex];\n        for (let i = currentText.length; i >= 0; i--) {\n            if (!document.body.contains(notificationElement)) return;\n            textElement.textContent = currentText.substring(0, i);\n            await sleep(deleteDuration / currentText.length);\n        }\n\n        currentIndex = (currentIndex + 1) % messages.length;\n        const nextText = messages[currentIndex];\n\n        for (let i = 0; i < nextText.length; i++) {\n            if (!document.body.contains(notificationElement)) return;\n            textElement.textContent += nextText[i];\n            await sleep(typeDuration / nextText.length);\n        }\n\n        cycle();\n    };\n\n    cycle();\n}\n\nconst manualPaymentCheck = () => {\n    if (isCheckingManually) return;\n    isCheckingManually = true;\n\n    const iPaidButton = document.getElementById('ph-i-paid-button');\n    if (iPaidButton) iPaidButton.disabled = true;\n\n    const orderId = ph_checkout_params?.order_id;\n    const nonce = ph_checkout_params?.nonce;\n    if (!orderId || !nonce) {\n        isCheckingManually = false;\n        if (iPaidButton) iPaidButton.disabled = false;\n        return;\n    }\n\n    const loadingSpinner = '<span class=\"ph-notification-spinner\"></span>';\n    const textMessages = [\n        'Estamos confirmando seu pagamento, só um instante...',\n        'Às vezes o banco leva um tempinho para nos notificar.',\n        'Não se preocupe, vamos continuar verificando por aqui.'\n    ];\n\n    const notification = showPhNotification({\n        message: `${loadingSpinner} <span>${textMessages[0]}</span>`,\n        type: 'warning',\n        duration: 0 // Fixa\n    });\n\n    const textElement = notification.querySelector('span:last-child');\n    animateNotificationText(notification, textElement, textMessages, 6000, 250, 1000);\n\n    const checkRunner = () => {\n        jQuery.post(ph_checkout_params.ajax_url, {\n            action: 'paghiper_check_payment_status',\n            security: nonce,\n            order_id: orderId\n        }, function(response) {\n            if (response.success && response.data.status === 'paid') {\n                clearInterval(manualCheckInterval);\n                clearTimeout(manualCheckTimeout);\n                notification.remove(); // Isso irá parar o loop de animação\n                showPhNotification({ message: 'Pagamento confirmado!', type: 'success' });\n                setTimeout(() => {\n                    if (typeof refreshCheckoutContent === 'function') {\n                        refreshCheckoutContent();\n                    } else {\n                        window.location.reload();\n                    }\n                }, 1000);\n            }\n        });\n    };\n\n    const manualCheckInterval = setInterval(checkRunner, 15000);\n\n    const manualCheckTimeout = setTimeout(() => {\n        clearInterval(manualCheckInterval);\n        notification.remove(); // Isso irá parar o loop de animação\n        showPhNotification({ message: 'Ainda não recebemos a confirmação do seu pagamento.', type: 'error' });\n        isCheckingManually = false;\n        if (iPaidButton) iPaidButton.disabled = false;\n    }, 1800000); // 30 minutos\n\n    checkRunner();\n};"],"names":["$","initializeMask","taxIdMaskBehavior","val","e","field","options","event","checkForTaxIdFields","otherTaxIdFields","otherPayerNameFields","paghiperFieldsetContainers","paghiperFieldsetContainer","ownTaxIdField","ownPayerNameField","hasTaxField","hasPayerNameField","paghiperEmvBlock","targetPixCode","targetButton","originalText","copyTextToClipboard","text","err","textArea","success","showPhNotification","message","type","duration","container","notification","refreshCheckoutContent","html","newContent","currentContent","error","copyButton","qrContainer","textContainer","handleCopyClick","_a","textToCopy","handleSelectClick","textDiv","selection","range","startPaymentStatusCheck","notificationElement","orderId","nonce","paymentCheckInterval","loadingSpinner","textMessages","textElement","animateNotificationText","response","iPaidButton","manualPaymentCheck","restoreCartButton","isCheckingManually","sleep","ms","resolve","messages","displayDuration","deleteDuration","typeDuration","currentIndex","cycle","currentText","i","nextText","checkRunner","manualCheckInterval","manualCheckTimeout"],"mappings":"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"}